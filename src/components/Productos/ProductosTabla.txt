

import { Link } from 'react-router-dom';
import '../../estilos/ProductosTabla.css';
import type Categoria from '../../entidades/Categoria';
import { useState } from 'react';



interface ProductosTablaProps {
  categorias: Categoria[]
}



export default function ProductosTabla({
  categorias = [],      
}: ProductosTablaProps) {
  const [categorias, SetCategorias] = useState<Categoria[]>();
  const [editable, setEditable] = useState<boolean>();
  const [modalCategoria, setModalCategoriaId] = useState<Categoria | undefined>(undefined);
  const [prodModalOpen, setProdModalOpen] = useState(false);

  function openModal(edit: boolean,isOpen: boolean, cat?: Categoria) {
      setEditable(edit);
      setModalCategoriaId(cat);
      setProdModalOpen(isOpen);
  }

  function deleteCategoria(id: number) {
      return async () => {
        if (!window.confirm('¬øEst√°s seguro de eliminar este producto?')) return;
        deleteCategoriaById(id)
          .then(() => setArticulos((prev) => prev.filter((a) => a.id !== id)))
          .catch((e) => {
            throw new Error(`Error al eliminar el producto: ${e.message}`);
          });
      };
    }

  return (
    <table className="products-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Categor√≠a</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody>
        {categorias.map(c => (
          <tr key={c.id}>
            <td>{c.id}</td>
              <td>
              
                {c.denominacion}
              
              </td>
            <td>
              <td>
              <Link to={`/admin/productos/${c.id}`} title="Ver productos">
                INGRESAR
              </Link>
              </td>
              <button 
                  title="Ver"
                  onClick={() => openModal(false, true, a!)}
                >üëÅÔ∏è</button>

                <button
                  title="Editar"
                  onClick={() => openModal(true, true, a!)}
                >‚úèÔ∏è</button>

                <button
                  title="Borrar"
                  onClick={deleteCategoria(c.id!)}
                >üóëÔ∏è</button>
            </td>
          </tr>
        ))}
      </tbody>
    </table>
  )
}